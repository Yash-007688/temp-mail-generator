<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard | Temp Mail Laboratory</title>
    <link rel="stylesheet" href="/static/css/style.css" />
    <link rel="icon" href="/static/img/logo.png" type="image/png" />
</head>

<body>
    <nav class="navbar">
        <div class="nav-left">
            <a class="brand" href="/">
                <img src="/static/img/logo.png" alt="Temp Mail" style="height: 40px;">
            </a>
            <a class="nav-link" href="/">Home</a>
            <a class="nav-link" href="/#features">Features</a>
            <a class="nav-link" href="/api">API Docs</a>
        </div>
        <div class="nav-right">
            <button id="btn-settings" class="nav-btn outline hidden" style="margin-right: 1.5rem;">Settings</button>
            <a id="btn-upgrade" class="nav-btn hidden" href="/#pricing"
                style="margin-right: 1.5rem; text-decoration: none;">Upgrade Plan</a>
            <a id="btn-login" class="nav-btn" href="/login">Login</a>
            <button id="btn-logout" class="nav-btn outline hidden">Logout</button>
        </div>
    </nav>

    <div id="status-msg" class="hidden"
        style="position: fixed; top: 100px; right: 2rem; padding: 1.25rem 2rem; border-radius: 1.25rem; background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(20px); border: 1px solid var(--primary); z-index: 10000; font-weight: 600; box-shadow: 0 20px 50px rgba(0,0,0,0.5);">
    </div>

    <div class="container" style="max-width: 1400px; padding-top: 4rem;">
        <div class="hero" style="border: none; background: transparent; padding: 0; margin-bottom: 5rem;">
            <div class="hero-title">Secure Dashboard</div>
            <h1 style="font-size: 3rem; margin-bottom: 3rem;">Control Your Privacy</h1>

            <div class="email-pill">
                <input id="email-display" type="text" readonly placeholder="Initializing secure session..." />
                <button id="btn-copy" class="icon-btn" title="Copy Address">ðŸ“‹</button>
                <button id="btn-refresh-inbox" class="icon-btn" title="Refresh Inbox">âŸ³</button>
            </div>

            <div class="row" style="justify-content: center; gap: 1rem;">
                <button id="btn-change" class="pill outline">Modify Address</button>
                <button id="btn-delete" class="pill danger">Terminate Session</button>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1.5fr; gap: 3rem; align-items: start;">
            <!-- Generation Control Panel -->
            <section class="section" style="padding: 3rem;">
                <h2 style="font-size: 1.75rem; margin-bottom: 2rem; display: flex; align-items: center; gap: 0.75rem;">
                    <span>âš¡</span> New Address
                </h2>

                <div style="margin-bottom: 3rem;">
                    <label
                        style="display: block; margin-bottom: 1rem; color: var(--text-muted); font-size: 0.875rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em;">Randomizer
                        Length</label>
                    <div class="row" style="gap: 1rem;">
                        <input id="random-length" type="number" min="4" max="30" value="10"
                            style="flex: 1; font-weight: 700; font-size: 1.25rem;" />
                        <button id="btn-gen-random" class="pill" style="padding: 1rem 2rem;">Regenerate</button>
                    </div>
                </div>

                <div style="border-top: 1px solid var(--border); padding-top: 3rem;">
                    <label
                        style="display: block; margin-bottom: 1rem; color: var(--text-muted); font-size: 0.875rem; font-weight: 600; text-transform: uppercase;">Custom
                        Alias</label>
                    <div style="display: flex; flex-direction: column; gap: 1rem; margin-bottom: 1.5rem;">
                        <input id="custom-username" placeholder="Enter username..." />
                        <input id="custom-domain" placeholder="Select domain (optional)" />
                    </div>
                    <button id="btn-gen-custom" class="pill outline" style="width: 100%; border-style: dashed;">Deploy
                        Custom Email</button>
                </div>
            </section>

            <!-- Secure Inbox View -->
            <section class="section" style="padding: 3rem; min-height: 600px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 3rem;">
                    <h2 style="font-size: 1.75rem; display: flex; align-items: center; gap: 0.75rem;">
                        <span>ðŸ“¬</span> Secure Inbox
                    </h2>
                    <div class="row" style="gap: 0.75rem;">
                        <button id="btn-refresh" class="icon-btn" title="Sync Inbox">âŸ³</button>
                        <button id="btn-export" class="icon-btn" title="Secure Export">ðŸ“¥</button>
                    </div>
                </div>

                <ul id="inbox-list" style="list-style: none;">
                    <!-- Emails injected here -->
                </ul>

                <div id="no-emails"
                    style="text-align: center; color: var(--text-muted); padding: 5rem 2rem; border: 2px dashed var(--border); border-radius: 2rem; background: rgba(255,255,255,0.01);">
                    <div style="font-size: 3rem; margin-bottom: 1.5rem; opacity: 0.3;">ðŸ“¡</div>
                    <p style="font-weight: 500;">Listening for incoming encrypted packets...</p>
                    <p style="font-size: 0.875rem; margin-top: 0.5rem; opacity: 0.6;">Refresh if waiting more than 60s
                    </p>
                </div>

                <pre id="email-view" class="hidden"
                    style="margin-top: 2rem; white-space: pre-wrap; word-break: break-word; line-height: 1.6; font-family: 'Outfit', sans-serif; font-size: 1rem; border-left: 2px solid var(--primary); padding-left: 2rem;"></pre>
            </section>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal hidden"
        style="position: fixed; inset: 0; background: rgba(0,0,0,0.8); backdrop-filter: blur(10px); display: flex; align-items: center; justify-content: center; z-index: 2000;">
        <div class="modal-content" style="width: 100%; max-width: 500px; padding: 3rem;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 3rem;">
                <h3 style="font-size: 2rem; font-weight: 800;">Preferences</h3>
                <button id="settings-close" class="icon-btn">âœ–</button>
            </div>

            <div class="form-row" style="margin-bottom: 2rem;">
                <label style="display: block; margin-bottom: 1rem; font-weight: 600; color: var(--text-muted);">Session
                    Username</label>
                <input id="settings-username" placeholder="Standard username" style="width: 100%;" />
            </div>
            <div class="form-row" style="margin-bottom: 3rem;">
                <label style="display: block; margin-bottom: 1rem; font-weight: 600; color: var(--text-muted);">Default
                    Domain</label>
                <input id="settings-domain" placeholder="e.g. 1secmail.com" style="width: 100%;" />
            </div>

            <div class="row" style="justify-content: flex-end; gap: 1rem;">
                <button id="settings-cancel" class="pill outline">Discard</button>
                <button id="settings-save" class="pill">Commit Changes</button>
            </div>
        </div>
    </div>

    <script src="/static/js/app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (window.refreshInbox) window.refreshInbox();
            const observer = new MutationObserver(() => {
                const list = document.getElementById('inbox-list');
                const placeholder = document.getElementById('no-emails');
                if (list.children.length > 0) {
                    placeholder.classList.add('hidden');
                } else {
                    placeholder.classList.remove('hidden');
                }
            });
            observer.observe(document.getElementById('inbox-list'), { childList: true });
        });
    </script>
</body>

</html>
